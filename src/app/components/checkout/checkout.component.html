<div class="main-content page-m">
  <div class="section-content section-content-p30">
    <div class="container-fluid">
      <form [formGroup]="checkoutFormGroup" (ngSubmit)="onSubmit()">
        <!--        customer form group-->
        <div formGroupName="customer" class="form-area">
          <h3>Dane osobowe</h3>

          <div class="row">
            <div class="col-md-2">
              <label>Imię</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="firstName" type="text">
                <div *ngIf="getFirstName()!.invalid && (getFirstName()!.dirty || getFirstName()!.touched)" class="alert alert-danger">
                  <div *ngIf="getFirstName()!.errors!.required || getFirstName()!.errors!.notOnlyWhitespace">Wprowadź imię!</div>
                  <div *ngIf="getFirstName()!.errors!.minlength">Musi mieć co najmniej 2 znaki!</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Nazwisko</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="lastName" type="text">
                <div *ngIf="getLastName()!.invalid && (getLastName()!.dirty || getLastName()!.touched)" class="alert alert-danger">
                  <div *ngIf="getLastName()!.errors!.required || getLastName()!.errors!.notOnlyWhitespace">Wprowadź nazwisko!</div>
                  <div *ngIf="getLastName()!.errors!.minlength">Musi mieć co najmniej 2 znaki!</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Adres e-mail</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="email" type="text">
                <div *ngIf="getEmail()!.invalid && (getEmail()!.dirty || getEmail()!.touched)" class="alert alert-danger">
                  <div *ngIf="getEmail()!.errors!.required">Wprowadź adres email!</div>
                  <div *ngIf="getEmail()!.errors!.pattern">Wprowadź prawidłowy adres!</div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <!--        credit card info-->
        <div formGroupName="creditCardInformation" class="form-area">
          <h3>Karta kredytowa</h3>

          <div class="row">
            <div class="col-md-2">
              <label>Dostawca karty:</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <select formControlName="cardType">
                  <option>Visa</option>
                  <option>Mastercard</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Dane na karcie</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="nameOnCard" type="text">
                <div *ngIf="getNameOnCard()!.invalid && (getNameOnCard()!.dirty || getNameOnCard()!.touched)" class="alert alert-danger">
                  <div *ngIf="getNameOnCard()!.errors!.required || getNameOnCard()!.errors!.notOnlyWhitespace">Wprowadź dane osobowe!</div>
                  <div *ngIf="getNameOnCard()!.errors!.minlength">Musi mieć co najmniej 2 znaki!</div>
                 </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Numer karty</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="cardNumber" type="text">
                <div *ngIf="getCardNumber()!.invalid && (getCardNumber()!.dirty || getCardNumber()!.touched)" class="alert alert-danger">
                  <div *ngIf="getCardNumber()!.errors!.required">Wprowadź numer karty!</div>
                  <div *ngIf="getCardNumber()!.errors!.pattern || getCardNumber()!.errors!.minlength || getCardNumber()!.errors!.maxlength">Wprowadź prawidłowy numer karty!</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Kod</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <input formControlName="securityCode" type="text">
                <div *ngIf="getSecurityCode()!.invalid && (getSecurityCode()!.dirty || getSecurityCode()!.touched)" class="alert alert-danger">
                  <div *ngIf="getSecurityCode()!.errors!.required">Wprowadź kod karty!</div>
                  <div *ngIf="getSecurityCode()!.errors!.pattern || getSecurityCode()!.errors!.minlength || getSecurityCode()!.errors!.maxlength">Wprowadź prawidłowy kod!</div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Data ważności - miesiąc</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <select formControlName="expirationMonth">
                  <option *ngFor="let month of creditCardMonths">{{month}}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-2">
              <label>Data ważności - rok</label>
            </div>
            <div class="col-md-9">
              <div class="input-space">
                <select formControlName="expirationYear" (change)="handleMonthsAndYears()">
                  <option *ngFor="let year of creditCardYears">{{year}}</option>
                </select>
              </div>
            </div>
          </div>

        </div>
        <!--        Order details-->
        <div class="form-area">
          <h3>Podsumowanie zamówienia:</h3>
          <p>Razem kopii: {{totalQuantity}}</p>
          <p>Do zapłaty: {{totalPrice.toFixed(2)}}</p>
        </div>
        <!--        submit button-->
        <div class="text-center">
          <button type="submit" class="btn btn-info">Złóż zamówienie</button>
        </div>
      </form>
    </div>
  </div>
</div>
